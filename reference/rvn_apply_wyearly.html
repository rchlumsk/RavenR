<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Apply function for water year — rvn_apply_wyearly • RavenR</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Apply function for water year — rvn_apply_wyearly"><meta property="og:description" content="rvn_apply_wyearly calculates a function FUN for the periods defined by the water
year, similar to other functions of the form apply.&amp;lt;time period&amp;gt;, for
example apply.daily, apply.monthly, etc."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RavenR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/Introduction_to_RavenR.html">Introduction to RavenR</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/rchlumsk/RavenR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Apply function for water year</h1>
    <small class="dont-index">Source: <a href="https://github.com/rchlumsk/RavenR/blob/HEAD/R/rvn_apply_wyearly.R" class="external-link"><code>R/rvn_apply_wyearly.R</code></a></small>
    <div class="hidden name"><code>rvn_apply_wyearly.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>rvn_apply_wyearly calculates a function FUN for the periods defined by the water
year, similar to other functions of the form apply.&lt;time period&gt;, for
example apply.daily, apply.monthly, etc.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">rvn_apply_wyearly</span><span class="op">(</span><span class="va">x</span>, <span class="va">FUN</span>, <span class="va">...</span>, mm <span class="op">=</span> <span class="fl">9</span>, dd <span class="op">=</span> <span class="fl">30</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>xts vector to calculate FUN for</p></dd>


<dt>FUN</dt>
<dd><p>the function to be applied</p></dd>


<dt>...</dt>
<dd><p>optional arguments to FUN</p></dd>


<dt>mm</dt>
<dd><p>month of water year ending (default 9)</p></dd>


<dt>dd</dt>
<dd><p>day of water year ending (default 30)</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>The default water year start is
October 1st, but may be adjusted with the mm and dd arguments. The values for
mm and dd indicate the end of the water year period (i.e. mm=9 and dd=30 indicates
a new water year on Oct 1).</p>
<p>Note that if using <code>FUN=mean</code>, please use <code>FUN=colMeans</code> instead.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="rvn_wyear_indices.html">rvn_wyear_indices</a></code> for obtaining endpoints in the water year</p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># use sample forcing data (or use forcings_read to read in ForcingFunctions.csv)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">rvn_forcing_data</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># apply mean (with colMeans) as FUN to daily average temperature</span></span></span>
<span class="r-in"><span><span class="fu">rvn_apply_wyearly</span><span class="op">(</span><span class="va">rvn_forcing_data</span><span class="op">$</span><span class="va">forcings</span><span class="op">$</span><span class="va">temp_daily_ave</span>,<span class="va">colMeans</span>,na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     temp_daily_ave</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2003-09-30 04:00:00       6.177794</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2004-09-30 04:00:00       6.931585</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># apply mean as FUN to all forcings</span></span></span>
<span class="r-in"><span><span class="fu">rvn_apply_wyearly</span><span class="op">(</span><span class="va">rvn_forcing_data</span><span class="op">$</span><span class="va">forcings</span>,<span class="va">colMeans</span>,na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     day_angle     rain      snow     temp temp_daily_min</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2003-09-30 04:00:00  3.141640 1.469701 0.3513806 6.177794       1.359503</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2004-09-30 04:00:00  3.141037 2.082020 0.2436921 6.931585       2.209062</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     temp_daily_max temp_daily_ave temp_monthly_min</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2003-09-30 04:00:00       10.99609       6.177794         -33333.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2004-09-30 04:00:00       11.65411       6.931585         -33333.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     temp_monthly_max air.dens air.pres rel.hum cloud.cover</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2003-09-30 04:00:00         -33333.3 1.206490 97.02194     0.5           0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2004-09-30 04:00:00         -33333.3 1.202985 97.03452     0.5           0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     ET.radiation SW.radiation LW.radiation wind.vel      PET</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2003-09-30 04:00:00     316.8497     238.5254    -64.25976        2 2.177175</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2004-09-30 04:00:00     316.9300     238.5925    -63.84922        2 2.185220</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       OW.PET daily.correction potential.melt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2003-09-30 04:00:00 2.177175                1       29.18804</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2004-09-30 04:00:00 2.185220                1       30.80885</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># apply maximum via RavenR::cmax as FUN to all forcings (takes the max in each column)</span></span></span>
<span class="r-in"><span><span class="co">## note that the base::max will not work properly here</span></span></span>
<span class="r-in"><span><span class="fu">rvn_apply_wyearly</span><span class="op">(</span><span class="va">rvn_forcing_data</span><span class="op">$</span><span class="va">forcings</span>,<span class="va">cmax</span>,na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     day_angle    rain    snow    temp temp_daily_min</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2003-09-30 04:00:00   6.27458 32.2238 8.62851 25.2944        20.0068</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2004-09-30 04:00:00   6.27458 34.7881 6.71767 24.5248        21.1044</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     temp_daily_max temp_daily_ave temp_monthly_min</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2003-09-30 04:00:00        30.8448        25.2944         -33333.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2004-09-30 04:00:00        29.8234        24.5248         -33333.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     temp_monthly_max air.dens air.pres rel.hum cloud.cover</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2003-09-30 04:00:00         -33333.3  1.33513  97.2976     0.5           0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2004-09-30 04:00:00         -33333.3  1.33700  97.2879     0.5           0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     ET.radiation SW.radiation LW.radiation wind.vel     PET</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2003-09-30 04:00:00      485.248      369.573     -36.6262        2 6.30455</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2004-09-30 04:00:00      485.248      371.919     -38.2550        2 5.68431</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                      OW.PET daily.correction potential.melt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2003-09-30 04:00:00 6.30455                1        118.251</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2004-09-30 04:00:00 5.68431                1        111.782</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># apply to Australian water year (July 1)</span></span></span>
<span class="r-in"><span><span class="fu">rvn_apply_wyearly</span><span class="op">(</span><span class="va">rvn_forcing_data</span><span class="op">$</span><span class="va">forcings</span>,<span class="va">cmax</span>,na.rm<span class="op">=</span><span class="cn">TRUE</span>, mm<span class="op">=</span><span class="fl">6</span>, dd<span class="op">=</span><span class="fl">30</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     day_angle    rain    snow    temp temp_daily_min</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2003-06-30 04:00:00   6.27458 32.2238 8.62851 25.0006        20.0068</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2004-06-30 04:00:00   6.27458 34.7881 6.71767 25.2944        19.7439</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2004-09-30 04:00:00   4.67805 26.3546 0.00000 24.5248        21.1044</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     temp_daily_max temp_daily_ave temp_monthly_min</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2003-06-30 04:00:00        30.2276        25.0006         -33333.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2004-06-30 04:00:00        30.8448        25.2944         -33333.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2004-09-30 04:00:00        29.3994        24.5248         -33333.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     temp_monthly_max air.dens air.pres rel.hum cloud.cover</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2003-06-30 04:00:00         -33333.3  1.33513  97.2945     0.5           0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2004-06-30 04:00:00         -33333.3  1.33700  97.2976     0.5           0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2004-09-30 04:00:00         -33333.3  1.18121  97.2879     0.5           0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     ET.radiation SW.radiation LW.radiation wind.vel     PET</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2003-06-30 04:00:00      485.248      369.573     -37.2143        2 6.30455</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2004-06-30 04:00:00      485.248      371.919     -36.6262        2 5.89993</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2004-09-30 04:00:00      482.730      361.562     -38.2550        2 5.68431</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                      OW.PET daily.correction potential.melt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2003-06-30 04:00:00 6.30455                1        117.654</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2004-06-30 04:00:00 5.89993                1        118.251</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2004-09-30 04:00:00 5.68431                1        109.244</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Robert Chlumsky, James Craig, Leland Scantlebury, Simon Lin, Sarah Grass, Genevieve Brown, Rezgar Arabzadeh.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

