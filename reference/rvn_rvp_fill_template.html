<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Rewrite template rvp file with values — rvn_rvp_fill_template • RavenR</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Rewrite template rvp file with values — rvn_rvp_fill_template"><meta property="og:description" content="Rewrites a Raven template rvp file with default parameter values."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RavenR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/Introduction_to_RavenR.html">Introduction to RavenR</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/rchlumsk/RavenR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Rewrite template rvp file with values</h1>
    <small class="dont-index">Source: <a href="https://github.com/rchlumsk/RavenR/blob/HEAD/R/rvn_rvp_fill_template.R" class="external-link"><code>R/rvn_rvp_fill_template.R</code></a></small>
    <div class="hidden name"><code>rvn_rvp_fill_template.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Rewrites a Raven template rvp file with default parameter values.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">rvn_rvp_fill_template</span><span class="op">(</span></span>
<span>  rvi_file <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  rvh_file <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  rvp_template_file <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fileprefix <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  rvp_out <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  default_param_value <span class="op">=</span> <span class="fl">0.12345</span>,</span>
<span>  default_soil_thickness <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  use_default_flag <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  avg_annual_runoff <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  extra_commands <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  RavenParamsFile <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"RavenParameters.dat"</span>, package <span class="op">=</span> <span class="st">"RavenR"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>rvi_file</dt>
<dd><p>path to the model *.rvi file</p></dd>


<dt>rvh_file</dt>
<dd><p>path to the model *.rvh file</p></dd>


<dt>rvp_template_file</dt>
<dd><p>path to the model rvp template file (*.rvp_temp.rvp)</p></dd>


<dt>fileprefix</dt>
<dd><p>model name prefix for the main model files; if provided, the function will attempt to find all missing file paths in the current working directory</p></dd>


<dt>rvp_out</dt>
<dd><p>file path to rewritten rvp file</p></dd>


<dt>overwrite</dt>
<dd><p>logical for whether to rewrite the *.rvp file if it already exists (default FALSE)</p></dd>


<dt>default_param_value</dt>
<dd><p>default parameter value to write for any parameters not found in RavenParameters.dat</p></dd>


<dt>default_soil_thickness</dt>
<dd><p>default soil layer thickness (m) to provide in :SoilProfile block</p></dd>


<dt>use_default_flag</dt>
<dd><p>writes all soil/land use/vegetation classes with [DEFAULT] flag</p></dd>


<dt>avg_annual_runoff</dt>
<dd><p>adds a line for :AvgAnnualRunoff if value provided with this parameter and not already in file</p></dd>


<dt>extra_commands</dt>
<dd><p>additional commands to add to end of rvp file as character vector</p></dd>


<dt>RavenParamsFile</dt>
<dd><p>path to RavenParameters.dat file (default path points to file included with RavenR installation)</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p><code>TRUE</code> if the function executed successfully</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The Raven rvp template file is generated by Raven when the :CreateRVPTemplate command is included in the
rvi file (the default when <code><a href="rvn_rvi_write_template.html">rvn_rvi_write_template</a></code> is used to produce an rvi file). This
template file displays the layout of the rvp file with required parameters based on the hydrologic processes
in the rvi file, but is not immediately usable. This function uses the soil model information in the rvi file
and the HRU class information in the rvh file to rewrite the template file with default parameter values so that
it can be used in a model run.</p>
<p>If <code>rvp_out</code> is not provided, Raven will attempt to write to the file prefix of the provided template file with a .rvp extension.
If there is a conflict with an existing file and <code>overwrite==FALSE</code>, the function will automatically overwrite a file
with the suffix "_ravenr_generated.rvp".</p>
<p>The default parameter values come from the RavenParameters.dat file included with RavenR in the extdata folder. The
user may provide their own file with updated values if preferred. Note that the database files held in the RavenR
package are unofficial copies of those in the official Raven SVN, and any discrepancies should defer to the Raven SVN versions.</p>
<p>Any parameters not found in this file will be written
with the value provided by <code>default_param_value</code>. The default soil thickness for the :SoilProfiles block is provided
by the <code>default_soil_thickness</code> function parameter, which is applied for all soil classes.</p>
<p>As an alternative to specifying the three input files (rvi, rvh, rvp_temp.rvp), the <code>fileprefix</code> of the model (e.g.
'Nith' for Nith.rvi) may be provided instead. If provided, the function will attempt to find all required input files based on
the provided fileprefix in the current working directory.</p>
<p>Additional commands can be added to the end of the rvp file with <code>extra_commands</code>, which are not quality controlled but
simply appended to the rvp file. This can be useful for non-standard commands such as :RedirectToFile for channel properties rvp files
that are not added automatically to base templates rvp files.</p>
<p>If you find parameters not found by this function, please open an ticket on Github (<a href="https://github.com/rchlumsk/RavenR/issues" class="external-link">https://github.com/rchlumsk/RavenR/issues</a>).</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="rvn_rvi_getparams.html">rvn_rvi_getparams</a></code> to get parameter ranges from rvi.</p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### this section is not run, but illustrates how an rvp template file would be created</span></span></span>
<span class="r-in"><span><span class="co"># -----</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co">## create an rvi file and template file with Raven</span></span></span>
<span class="r-in"><span><span class="fu"><a href="rvn_rvi_write_template.html">rvn_rvi_write_template</a></span><span class="op">(</span>modelname<span class="op">=</span><span class="st">"HBV-EC"</span>,</span></span>
<span class="r-in"><span>   filename<span class="op">=</span><span class="st">"nithmodel.rvi"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## download Raven.exe if not already downloaded</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="rvn_download.html">rvn_download</a></span><span class="op">(</span>check<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="rvn_download.html">rvn_download</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## run Raven to create template file</span></span></span>
<span class="r-in"><span><span class="fu"><a href="rvn_run.html">rvn_run</a></span><span class="op">(</span>fileprefix<span class="op">=</span><span class="st">"nithmodel"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="co"># -----</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># load pre-generated template file and other model files</span></span></span>
<span class="r-in"><span><span class="va">nithmodel_template_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>,<span class="st">"nithmodel.rvp_temp.rvp"</span>, package<span class="op">=</span><span class="st">"RavenR"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">nith_rvi_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>,<span class="st">"Nith.rvi"</span>, package<span class="op">=</span><span class="st">"RavenR"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">nith_rvh_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>,<span class="st">"Nith.rvh"</span>, package<span class="op">=</span><span class="st">"RavenR"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">rvp_out_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">'nithmodel.rvp'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># rewrite template with parameter values</span></span></span>
<span class="r-in"><span><span class="fu">rvn_rvp_fill_template</span><span class="op">(</span>rvi_file<span class="op">=</span><span class="va">nith_rvi_file</span>,</span></span>
<span class="r-in"><span>                      rvh_file<span class="op">=</span><span class="va">nith_rvh_file</span>,</span></span>
<span class="r-in"><span>                      rvp_template_file<span class="op">=</span><span class="va">nithmodel_template_file</span>,</span></span>
<span class="r-in"><span>                      rvp_out<span class="op">=</span><span class="va">rvp_out_file</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Robert Chlumsky, James Craig, Leland Scantlebury, Simon Lin, Sarah Grass, Genevieve Brown, Rezgar Arabzadeh.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

